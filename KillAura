local p = game:GetService("Players").LocalPlayer
local char = p.Character or p.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")
local rs = game:GetService("ReplicatedStorage")

local gui = Instance.new("ScreenGui", gethui and gethui() or game.CoreGui)
gui.Name = "AutoFarmUI"
gui.ResetOnSpawn = false

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 180, 0, 240)
frame.Position = UDim2.new(0, 20, 0, 200)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)

local y = 10
local function addButton(text, callback)
	local btn = Instance.new("TextButton", frame)
	btn.Size = UDim2.new(1, -20, 0, 30)
	btn.Position = UDim2.new(0, 10, 0, y)
	btn.Text = text
	btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
	btn.TextColor3 = Color3.new(1,1,1)
	btn.MouseButton1Click:Connect(callback)
	y += 35
	return btn
end

local digPos = nil
addButton("Dig Here", function()
	digPos = hrp.Position
	wait(0.1)
	if digPos then char:FindFirstChildOfClass("Humanoid"):ChangeState(Enum.HumanoidStateType.Jumping) end
end)

local running = false
local startBtn = addButton("Start [OFF]", function()
	if not digPos then return end
	running = not running
	startBtn.Text = running and "Start [ON]" or "Start [OFF]"
	while running and digPos do
		hrp.CFrame = CFrame.new(digPos + Vector3.new(0, 0, 5))
		wait(0.8)
		hrp.CFrame = CFrame.new(digPos)
		wait(0.8)
	end
end)

addButton("Sell", function()
	pcall(function()
		rs:WaitForChild("Remotes"):WaitForChild("Shop"):WaitForChild("SellAll"):InvokeServer()
	end)
end)

addButton("Enchant", function()
	pcall(function()
		local args = {Instance.new("Tool", nil), false}
		rs:WaitForChild("Remotes"):WaitForChild("Crafting"):WaitForChild("ReforgeEquipment"):InvokeServer(unpack(args))
	end)
end)

local boosting = false
local boostBtn = addButton("Boost [OFF]", function()
	boosting = not boosting
	boostBtn.Text = boosting and "Boost [ON]" or "Boost [OFF]"
	if not boosting then return end

	task.spawn(function()
		while boosting do
			local c = p.Character or p.CharacterAdded:Wait()
			local path = c:WaitForChild("Worldshaker"):WaitForChild("Scripts")
			pcall(function() path.ToggleShovelActive:FireServer(true) end)
			pcall(function() path.Collect:InvokeServer() end)
			pcall(function() path.Collect:InvokeServer(1) end)
			pcall(function() path.Pan:InvokeServer() end)
			wait()
			pcall(function() path.ToggleShovelActive:FireServer(false) end)
			wait(2)
		end
	end)
end)
