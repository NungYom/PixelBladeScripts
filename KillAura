loadstring([[
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local HRP = Character:WaitForChild("HumanoidRootPart")

-- จุด Dig และ Spawn
local digPosition = nil
local returnPosition = nil
local autoSell = false
local startOn = false
local boostOn = false

-- GUI Setup
local guiParent = gethui and gethui() or game.CoreGui
pcall(function() guiParent:FindFirstChild("AutoFarmUI"):Destroy() end)
local gui = Instance.new("ScreenGui", guiParent)
gui.Name = "AutoFarmUI"
gui.ResetOnSpawn = false

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 220, 0, 290)
frame.Position = UDim2.new(0, 20, 0.4, 0)
frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true

local function createButton(text, y, callback)
	local btn = Instance.new("TextButton", frame)
	btn.Size = UDim2.new(1, -10, 0, 30)
	btn.Position = UDim2.new(0, 5, 0, y)
	btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	btn.TextColor3 = Color3.new(1,1,1)
	btn.Font = Enum.Font.SourceSans
	btn.TextSize = 20
	btn.Text = text
	btn.MouseButton1Click:Connect(callback)
	return btn
end

local statusStart = createButton("Start: OFF", 5, function()
	if not digPosition then return warn("No dig position set.") end
	startOn = not startOn
	statusStart.Text = "Start: " .. (startOn and "ON" or "OFF")
	if startOn then
		task.spawn(function()
			returnPosition = HRP.Position
			while startOn do
				HRP.CFrame = CFrame.new(digPosition)
				task.wait(tonumber(frame:FindFirstChild("SandTime").Text) or 5)
				HRP.CFrame = CFrame.new(returnPosition)
				task.wait(tonumber(frame:FindFirstChild("WaterTime").Text) or 5)
			end
		end)
	end
end)

createButton("Dig Here", 40, function()
	local pos = HRP.Position
	if pos then
		digPosition = pos
		Character:FindFirstChildOfClass("Humanoid"):ChangeState(Enum.HumanoidStateType.Jumping)
	end
end)

createButton("Sell", 75, function()
	ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Shop"):WaitForChild("SellAll"):InvokeServer()
end)

createButton("Enchant", 110, function()
	local args = {Instance.new("Tool", nil), false}
	ReplicatedStorage.Remotes.Crafting.ReforgeEquipment:InvokeServer(unpack(args))
end)

local boostBtn = createButton("Boost: OFF", 145, function()
	boostOn = not boostOn
	boostBtn.Text = "Boost: " .. (boostOn and "ON" or "OFF")
	if boostOn then
		task.spawn(function()
			while boostOn do
				local char = LocalPlayer.Character
				local scripts = char and char:FindFirstChild("Worldshaker") and char.Worldshaker:FindFirstChild("Scripts")
				if scripts then
					pcall(function()
						scripts.ToggleShovelActive:FireServer(true)
						scripts.Collect:InvokeServer()
						scripts.Collect:InvokeServer(1)
						scripts.Pan:InvokeServer()
						scripts.ToggleShovelActive:FireServer(false)
					end)
				end
				task.wait(0.1)
			end
		end)
	end
end)

local autoSellBtn = createButton("Auto Sell: OFF", 180, function()
	autoSell = not autoSell
	autoSellBtn.Text = "Auto Sell: " .. (autoSell and "ON" or "OFF")
	if autoSell then
		task.spawn(function()
			while autoSell do
				local panFill = tonumber(LocalPlayer.PlayerGui:FindFirstChild("MainUI")?
					FindFirstChild("PanFill")?
					FindFirstChild("Amount")?
					.Text:match("%d+")) or 0
				if panFill >= 150 then
					ReplicatedStorage.Remotes.Shop.SellAll:InvokeServer()
				end
				task.wait(1)
			end
		end)
	end
end)

local sandBox = Instance.new("TextBox", frame)
sandBox.Size = UDim2.new(0.5, -6, 0, 25)
sandBox.Position = UDim2.new(0, 5, 0, 215)
sandBox.Name = "SandTime"
sandBox.Text = "7"
sandBox.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
sandBox.TextColor3 = Color3.new(1,1,1)
sandBox.Font = Enum.Font.SourceSans
sandBox.TextSize = 20

local waterBox = Instance.new("TextBox", frame)
waterBox.Size = UDim2.new(0.5, -6, 0, 25)
waterBox.Position = UDim2.new(0.5, 1, 0, 215)
waterBox.Name = "WaterTime"
waterBox.Text = "10"
waterBox.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
waterBox.TextColor3 = Color3.new(1,1,1)
waterBox.Font = Enum.Font.SourceSans
waterBox.TextSize = 20

-- พับ/ขยาย GUI
local toggleBtn = Instance.new("TextButton", gui)
toggleBtn.Text = "◀"
toggleBtn.Size = UDim2.new(0, 30, 0, 30)
toggleBtn.Position = UDim2.new(0, frame.AbsolutePosition.X + frame.AbsoluteSize.X + 5, 0, frame.AbsolutePosition.Y)
toggleBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
toggleBtn.TextColor3 = Color3.new(1, 1, 1)
toggleBtn.Font = Enum.Font.SourceSansBold
toggleBtn.TextSize = 20
toggleBtn.MouseButton1Click:Connect(function()
	frame.Visible = not frame.Visible
	toggleBtn.Text = frame.Visible and "◀" or "▶"
end)

]])()
