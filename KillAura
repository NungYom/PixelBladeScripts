local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local Character = player.Character or player.CharacterAdded:Wait()

-- ล้าง GUI เก่า
local old = playerGui:FindFirstChild("FarmGui")
if old then old:Destroy() end

-- สร้าง GUI ใหม่
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "FarmGui"
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true
screenGui.DisplayOrder = 999
screenGui.Parent = playerGui -- ✅ บังคับใช้ PlayerGui โดยตรง

-- พื้นหลัง Frame
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 220, 0, 170)
frame.Position = UDim2.new(0, 20, 0, 300)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BackgroundTransparency = 0.5
frame.BorderSizePixel = 0
frame.Parent = screenGui

-- สร้างปุ่ม Sell
local sellBtn = Instance.new("TextButton")
sellBtn.Size = UDim2.new(0, 200, 0, 40)
sellBtn.Position = UDim2.new(0, 10, 0, 10)
sellBtn.Text = "Sell"
sellBtn.BackgroundColor3 = Color3.fromRGB(255, 180, 50)
sellBtn.TextColor3 = Color3.new(1, 1, 1)
sellBtn.Font = Enum.Font.SourceSansBold
sellBtn.TextSize = 20
sellBtn.Parent = frame

sellBtn.MouseButton1Click:Connect(function()
	pcall(function()
		ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Shop"):WaitForChild("SellAll"):InvokeServer()
	end)
end)

-- สร้างปุ่มวาร์ป
local tpBtn = Instance.new("TextButton")
tpBtn.Size = UDim2.new(0, 200, 0, 40)
tpBtn.Position = UDim2.new(0, 10, 0, 60)
tpBtn.Text = "Teleport to Cave"
tpBtn.BackgroundColor3 = Color3.fromRGB(50, 180, 255)
tpBtn.TextColor3 = Color3.new(1, 1, 1)
tpBtn.Font = Enum.Font.SourceSansBold
tpBtn.TextSize = 20
tpBtn.Parent = frame

tpBtn.MouseButton1Click:Connect(function()
	local root = Character:WaitForChild("HumanoidRootPart")
	root.CFrame = CFrame.new(-247, -41, 620)
end)
