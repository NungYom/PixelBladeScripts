-- GUI AutoFarm + AutoSellAll + DigHere
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")
local HRP = Character:WaitForChild("HumanoidRootPart")

-- GUI Setup
local gui = Instance.new("ScreenGui", game:GetService("CoreGui"))
gui.Name = "AutoFarmGUIv2"

local function createButton(text, position)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0, 200, 0, 50)
	btn.Position = position
	btn.Text = text
	btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	btn.TextColor3 = Color3.new(1, 1, 1)
	btn.TextScaled = true
	btn.Font = Enum.Font.SourceSansBold
	btn.Parent = gui
	return btn
end

-- States
local autoSell = false
local autoFarm4 = false
local farmDestination = nil

-- Sell Button
local sellBtn = createButton("Auto Sell All: OFF", UDim2.new(0, 10, 0, 10))
sellBtn.MouseButton1Click:Connect(function()
	autoSell = not autoSell
	sellBtn.Text = "Auto Sell All: " .. (autoSell and "ON" or "OFF")
end)

-- Auto Farm4 Button
local farmBtn = createButton("Auto Farm4: OFF", UDim2.new(0, 10, 0, 70))
farmBtn.MouseButton1Click:Connect(function()
	autoFarm4 = not autoFarm4
	farmBtn.Text = "Auto Farm4: " .. (autoFarm4 and "ON" or "OFF")
end)

-- Dig Here Button
local digBtn = createButton("Dig Here", UDim2.new(0, 10, 0, 130))
digBtn.MouseButton1Click:Connect(function()
	farmDestination = HRP.Position
	Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
	print("üìå ‡∏à‡∏∏‡∏î‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà:", farmDestination)
end)

-- Auto Sell Loop
task.spawn(function()
	while true do
		if autoSell then
			pcall(function()
				ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Shop"):WaitForChild("SellAll"):InvokeServer()
			end)
		end
		task.wait(10)
	end
end)

-- Auto Farm4 Loop
task.spawn(function()
	while true do
		if autoFarm4 and farmDestination then
			pcall(function()
				local originalPos = HRP.Position

				-- ‡∏ß‡∏≤‡∏£‡πå‡∏õ‡πÑ‡∏õ‡∏¢‡∏±‡∏á farmDestination
				HRP.CFrame = CFrame.new(farmDestination)

				-- ‡∏£‡∏±‡∏ß Collect 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
				local startTime = tick()
				while tick() - startTime < 3 do
					local args = {1}
					Character:WaitForChild("Metal Pan"):WaitForChild("Scripts"):WaitForChild("Collect"):InvokeServer(unpack(args))
					task.wait(0.05)
				end

				-- ‡∏ß‡∏≤‡∏£‡πå‡∏õ‡∏Å‡∏•‡∏±‡∏ö
				HRP.CFrame = CFrame.new(originalPos)

				-- ‡∏£‡∏±‡∏ß Shake 20 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
				local shakeStart = tick()
				while tick() - shakeStart < 20 do
					Character:WaitForChild("Metal Pan"):WaitForChild("Scripts"):WaitForChild("Shake"):FireServer()
					task.wait(0.05)
				end
			end)
		end
		task.wait(1)
	end
end)
