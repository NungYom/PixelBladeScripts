local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")

-- GUI à¸—à¸µà¹ˆà¹à¸ªà¸”à¸‡à¸œà¸¥
local gui = Instance.new("ScreenGui", PlayerGui)
gui.Name = "KillAuraGui"

-- à¸›à¸¸à¹ˆà¸¡à¹€à¸›à¸´à¸”à¸›à¸´à¸” Kill Aura
local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 250, 0, 60)
button.Position = UDim2.new(0, 30, 0, 30)
button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
button.TextColor3 = Color3.fromRGB(255, 255, 255)
button.Font = Enum.Font.GothamBold
button.TextSize = 22
button.Text = "Kill Aura: OFF"
button.Parent = gui

-- à¹à¸ªà¸”à¸‡ Log / Debug
local logLabel = Instance.new("TextLabel")
logLabel.Size = UDim2.new(0, 500, 0, 100)
logLabel.Position = UDim2.new(0, 30, 0, 100)
logLabel.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
logLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
logLabel.Font = Enum.Font.Code
logLabel.TextSize = 16
logLabel.TextWrapped = true
logLabel.Text = "Logs:\n"
logLabel.Parent = gui

local function log(msg)
    logLabel.Text = logLabel.Text .. tostring(msg) .. "\n"
end

local auraOn = false
button.MouseButton1Click:Connect(function()
    auraOn = not auraOn
    button.Text = "Kill Aura: " .. (auraOn and "ON" or "OFF")
    log("Aura Toggled: " .. tostring(auraOn))
end)

-- à¸«à¸²à¹€à¸›à¹‰à¸²à¸«à¸¡à¸²à¸¢à¹ƒà¸™à¸£à¸°à¸¢à¸° 100 studs
local function getTargets(radius)
    local targets = {}

    for _, p in pairs(Players:GetPlayers()) do
        if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("HumanoidRootPart") and p.Character:FindFirstChild("Humanoid") and p.Character.Humanoid.Health > 0 then
            local dist = (HumanoidRootPart.Position - p.Character.HumanoidRootPart.Position).Magnitude
            if dist <= radius then
                table.insert(targets, p.Character)
            end
        end
    end

    for _, npc in pairs(workspace:GetDescendants()) do
        if npc:IsA("Model") and npc:FindFirstChild("Humanoid") and npc:FindFirstChild("HumanoidRootPart") and npc ~= Character and npc.Humanoid.Health > 0 then
            local dist = (HumanoidRootPart.Position - npc.HumanoidRootPart.Position).Magnitude
            if dist <= radius then
                table.insert(targets, npc)
            end
        end
    end

    return targets
end

-- Remotes
local remotes = ReplicatedStorage:WaitForChild("remotes")
local swing = remotes:FindFirstChild("swing")
local newEffect = remotes:FindFirstChild("newEffect")

-- à¹‚à¸ˆà¸¡à¸•à¸µ 1 à¸„à¸£à¸±à¹‰à¸‡
local function attack()
    local crusher = Character:FindFirstChild("Crusher")
    if not crusher then
        log("âŒ à¹„à¸¡à¹ˆà¸žà¸šà¸­à¸²à¸§à¸¸à¸˜ 'Crusher'")
        return
    end

    -- Fire PositionalSound
    newEffect:FireServer("PositionalSound", {
        position = HumanoidRootPart.Position,
        soundName = "SwordSwoosh",
        positionMoveWith = HumanoidRootPart
    })
    log("ðŸŽµ Fired: PositionalSound")

    -- Fire Slash
    newEffect:FireServer("Slash", {
        wpn = crusher,
        waitTime = 0.1
    })
    log("ðŸ’¥ Fired: Slash Effect")

    -- Fire Swing
    swing:FireServer()
    log("ðŸ—¡ï¸ Fired: swing")
end

-- à¸¥à¸¹à¸› Kill Aura
task.spawn(function()
    while true do
        if auraOn then
            local targets = getTargets(100)
            if #targets > 0 then
                log("ðŸŽ¯ Targets found: " .. #targets)
                attack()
            end
        end
        task.wait(0.3)
    end
end)
